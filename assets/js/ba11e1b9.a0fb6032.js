"use strict";(self.webpackChunkprovenance_blockchain_developer_portal=self.webpackChunkprovenance_blockchain_developer_portal||[]).push([[3211],{49141:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>i,metadata:()=>r,toc:()=>d});var o=t(74848),s=t(28453);const i={},a="Funding",r={id:"learn/provenance-applications/loan-origination-system-los/funding",title:"Funding",description:"Figure will fund a loan at the time of onboarding using stablecoin issued by an Omnibus Bank. When the Omnibus Bank receives funds from the originator, it mints a corresponding amount of stablecoin into a Marker account representing the originator\u2019s funding source. Loans are funded by transferring stablecoin to Omnibus Bank's Marker account with an identifier representing the borrower\u2019s fiat bank information. Next, the Omnibus Bank will convert the borrower\u2019s coin to fiat and send funds to the borrower\u2019s bank account. The stablecoin used is burned in the process of conversion to fiat.",source:"@site/docs/learn/provenance-applications/loan-origination-system-los/funding.md",sourceDirName:"learn/provenance-applications/loan-origination-system-los",slug:"/learn/provenance-applications/loan-origination-system-los/funding",permalink:"/docs/learn/provenance-applications/loan-origination-system-los/funding",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},c={},d=[];function u(n){const e={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"funding",children:"Funding"})}),"\n",(0,o.jsx)(e.p,{children:"Figure will fund a loan at the time of onboarding using stablecoin issued by an Omnibus Bank. When the Omnibus Bank receives funds from the originator, it mints a corresponding amount of stablecoin into a Marker account representing the originator\u2019s funding source. Loans are funded by transferring stablecoin to Omnibus Bank's Marker account with an identifier representing the borrower\u2019s fiat bank information. Next, the Omnibus Bank will convert the borrower\u2019s coin to fiat and send funds to the borrower\u2019s bank account. The stablecoin used is burned in the process of conversion to fiat."}),"\n",(0,o.jsx)(e.p,{children:"Example Code - fund a loan using stablecoin on Provenance Blockchain:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-kotlin",children:'fun transferCoin(denom: String, amount: Int, toAddress: String, memo: String) =\n        pbClient().estimateTx {\n            prepare { this.banks.transferFunds(toAddress, listOf(Coin(denom, amount.toString()))) }\n        }.let {\n            val gasFeePair = adjustGasEstimates(it)\n            log.info("Transfer: $amount $denom from keystone ID: ${keystone.provenanceConfig.memberUuid()} " +\n                    "address: ${keystone.address()} index: ${keystone.addressIndex()} to address: $toAddress memo: $memo " +\n                    "est gas: ${gasFeePair.first} est txFees: ${gasFeePair.second}")\n            pbClient().runTx(gas = gasFeePair.first, fees = listOf(Coin(Denom.vspn.name, gasFeePair.second)), memo = memo) {\n                this.banks.transferFunds(toAddress, listOf(Coin(denom, amount.toString())))\n            }\n        }\n\nfun adjustGasEstimates(gasEstimate: GasEstimates): Pair<String, String> =\n        gasEstimate.total.toBigDecimal().times(GAS_AND_FEE_ADJUSTMENT)\n                .setScale(0, RoundingMode.HALF_UP).let { gas ->\n                    val fees = gas.times(FEE_PERCENTAGE).setScale(0, RoundingMode.HALF_UP)\n                    Pair(\n                            gas.toLong().toString(),\n                            fees.toLong().toString()\n                    )\n                }\n'})}),"\n",(0,o.jsx)(e.p,{children:"Throughout the funding process, additional BlockVault contracts are invoked to save funding-related metadata to the scope."})]})}function l(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(u,{...n})}):u(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>r});var o=t(96540);const s={},i=o.createContext(s);function a(n){const e=o.useContext(i);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),o.createElement(i.Provider,{value:e},n.children)}}}]);