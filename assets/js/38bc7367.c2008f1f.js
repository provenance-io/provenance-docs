"use strict";(self.webpackChunkprovenance_docs=self.webpackChunkprovenance_docs||[]).push([[1335],{3905:(e,t,r)=>{r.d(t,{Zo:()=>m,kt:()=>u});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},m=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),d=l(r),u=a,h=d["".concat(c,".").concat(u)]||d[u]||p[u]||o;return r?n.createElement(h,s(s({ref:t},m),{},{components:r})):n.createElement(h,s({ref:t},m))}));function u(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,s=new Array(o);s[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var l=2;l<o;l++)s[l]=r[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},8677:(e,t,r)=>{r.d(t,{Y:()=>a});var n=r(7294);const a=e=>{let{text:t}=e;return n.createElement("p",{className:"pb-5 mb-5 -mt-3 border-0 border-b border-b-gray-300 border-solid text-gray-500"},t)}},9681:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>c,toc:()=>m});var n=r(7462),a=(r(7294),r(3905)),o=r(8677);const s={},i="Smart Contracts (ProvWasm)",c={unversionedId:"pb/modules/provwasm-smart-contracts",id:"pb/modules/provwasm-smart-contracts",title:"Smart Contracts (ProvWasm)",description:"Overview",source:"@site/docs/pb/modules/provwasm-smart-contracts.md",sourceDirName:"pb/modules",slug:"/pb/modules/provwasm-smart-contracts",permalink:"/provenance-docs/docs/pb/modules/provwasm-smart-contracts",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Name",permalink:"/provenance-docs/docs/pb/modules/name-module"},next:{title:"P8e Contract Execution Environment",permalink:"/provenance-docs/docs/pb/p8e/overview/"}},l={},m=[{value:"Overview",id:"overview",level:2},{value:"Blockchain Extensions",id:"blockchain-extensions",level:3},{value:"Rust Bindings",id:"rust-bindings",level:2},{value:"Parameters",id:"parameters",level:3},{value:"API",id:"api",level:3},{value:"Mocks",id:"mocks",level:3},{value:"Integrations",id:"integrations",level:3},{value:"Status",id:"status",level:2},{value:"References",id:"references",level:2}],p={toc:m};function d(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"smart-contracts-provwasm"},"Smart Contracts (ProvWasm)"),(0,a.kt)(o.Y,{text:"Web assembly (Wasm) smart contracts for the Provenance Blockchain.",mdxType:"DocSubheader"}),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"ProvWasm contains extensions for a third party blockchain module. These extensions, combined with a library, provide developers the ability to create web assembly smart contracts for the Provenance Blockchain using the Rust programming language."),(0,a.kt)("h3",{id:"blockchain-extensions"},"Blockchain Extensions"),(0,a.kt)("p",null,"The CosmWasm VM only integrates with the ",(0,a.kt)("inlineCode",{parentName:"p"},"banking")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"staking")," modules by default. However, it allows for adding custom encoders and queriers. A package was added in the Provenance Blockchain that contain extensions for the following Provenance Blockchain modules:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/provenance-docs/docs/pb/modules/account"},"Account")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/provenance-docs/docs/pb/modules/marker-module"},"Marker")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/provenance-docs/docs/pb/modules/name-module"},"Name")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/provenance-docs/docs/pb/modules/metadata-module"},"Metadata")," - NOTE: Not yet implemented")),(0,a.kt)("p",null,"These extensions are compiled into the blockchain at build time."),(0,a.kt)("h2",{id:"rust-bindings"},"Rust Bindings"),(0,a.kt)("p",null,"In order to provide a high quality smart contract developer experience, a Rust ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/provenance-io/provwasm"},"library")," was created to simplify calls to the Provenance Blockchain extensions."),(0,a.kt)("p",null,"The library can be broken down into the following components."),(0,a.kt)("h3",{id:"parameters"},"Parameters"),(0,a.kt)("p",null,"The core of the rust library contains types that are passed to and received from Provenance Blockchain encoders and queriers. Special care must be taken to ensure the Rust types are compatible with Go types in the queriers and encoders. To support this, a semantic data format version is passed through with each message. This enables backward compatability in the blockchain extensions."),(0,a.kt)("h3",{id:"api"},"API"),(0,a.kt)("p",null,"A number of high-level functions and types were added to on top of the core parameters to simplify contract development. This will also provide a compatability layer - minimizing changes required to smart contracts when breaking changes are required in the blockchain extensions and core types."),(0,a.kt)("h3",{id:"mocks"},"Mocks"),(0,a.kt)("p",null,"One of the benefits of ProvWasm is that it allows for robust unit testing of smart contracts before deployment to the Provenance Blockchain. Using the types described above, a mock environment can be created so unit tests can run as if they are executing against a running blockchain. This allows developers to ensure their contracts are correct before having to pay fees to deploy to a network."),(0,a.kt)("h3",{id:"integrations"},"Integrations"),(0,a.kt)("p",null,"To ensure the library code works correctly with the blockchain extensions, smart contracts were developed for each custom module in provenance. These contracts can be deployed to a localnet ","(","or the testnet",")"," for integration testing."),(0,a.kt)("h2",{id:"status"},"Status"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"ProvWasm is alpha software. Use with caution."))),(0,a.kt)("p",null,'There is no guaranteed migration path for smart contracts deployed to provenance, not even "dump state and restart" to move to future versions.'),(0,a.kt)("h2",{id:"references"},"References"),(0,a.kt)("p",null,"Smart contract technical reference documentation"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.cosmwasm.com/"},"CosmWasm")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/CosmWasm/wasmd/blob/master/INTEGRATION.md"},"CosmWasm CosmosSDK Integration"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/CosmWasm/cosmwasm/blob/master/README.md"},"WebAssembly Smart Contracts for the Cosmos SDK")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/CosmWasm/go-cosmwasm/blob/master/spec/Index.md"},"Go-CosmWasm Spec")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/CosmWasm/wasmd/tree/master/x/wasm"},"CosmWasm Module Source")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/CosmWasm/cosmwasm/blob/master/EntryPoints.md"},"Defining WASM Entry Points"))))}d.isMDXComponent=!0}}]);