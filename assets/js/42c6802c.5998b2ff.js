"use strict";(self.webpackChunkprovenance_blockchain_developer_portal=self.webpackChunkprovenance_blockchain_developer_portal||[]).push([[9641],{11081:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var a=t(85893),i=t(11151),s=t(98677);const o={},r="201 - Account Metadata",c={id:"pb/contributing/adr/base-infrastructure/account-metadata",title:"201 - Account Metadata",description:'<DocSubheader text= "A structure for collecting key/value metadata attributes against an address (account) on the blockchain. Uses the Name Service to control the allowed set of Keys."',source:"@site/docs/pb/contributing/adr/200-base-infrastructure/201-account-metadata.md",sourceDirName:"pb/contributing/adr/200-base-infrastructure",slug:"/pb/contributing/adr/base-infrastructure/account-metadata",permalink:"/docs/pb/contributing/adr/base-infrastructure/account-metadata",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:201,frontMatter:{},sidebar:"documentationSidebar",previous:{title:"200 - Name Service",permalink:"/docs/pb/contributing/adr/base-infrastructure/name-service"},next:{title:"300 Core Concepts",permalink:"/docs/pb/contributing/adr/core-concepts/"}},l={},d=[{value:"Changelog",id:"changelog",level:2},{value:"Context",id:"context",level:2},{value:"Decision",id:"decision",level:2},{value:"Each of the keys is an owned name.",id:"each-of-the-keys-is-an-owned-name",level:3},{value:"There may be more than one instance of a key.",id:"there-may-be-more-than-one-instance-of-a-key",level:3},{value:"The type information is for serialization",id:"the-type-information-is-for-serialization",level:3},{value:"Status",id:"status",level:2},{value:"Consequences",id:"consequences",level:2},{value:"Positive",id:"positive",level:3},{value:"Negative",id:"negative",level:3},{value:"Neutral",id:"neutral",level:3},{value:"References",id:"references",level:2}];function h(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"201---account-metadata",children:"201 - Account Metadata"}),"\n","\n","\n",(0,a.jsx)(s.Y,{text:"A structure for collecting key/value metadata attributes against an address (account) on the blockchain. Uses the Name Service to control the allowed set of Keys."}),"\n",(0,a.jsx)(n.h2,{id:"changelog",children:"Changelog"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"30042020: Initial Version"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,a.jsx)(n.p,{children:"Accounts on the Provenance Blockchain are based around the concept of holding a collection of coins under an address derived from a public key. All transactions with the blockchain must be associated with an account."}),"\n",(0,a.jsx)(n.h2,{id:"decision",children:"Decision"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"We will define a system to assign exclusive control of names to accounts. These accounts will be able to create sub names (reverse DNS style) which grant control to other accounts using their address."}),"\n",(0,a.jsx)(n.li,{children:"We will create a metadata registry of key/value/type data associated with an address. The data itself will be written and controlled by the account that owns the name used in the key."}),"\n",(0,a.jsx)(n.li,{children:"We will create standard query interfaces that allow these keys to be returned as a set for an address and optionally return values that are filtered to a specific key name."}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Example of a query from the cli for information associated with an address\n%%> provenanced query account-info provenance1zmfjfu84hxv6vtpr4v0glf6qudmct3y3fahwpz\n\n  address: provenance1zmfjfu84hxv6vtpr4v0glf6qudmct3y3fahwpz\n  attributes:\n  - name: "accred-investor.passport.provenance.pio"\n    value: "{status:\\"true\\"}"\n    type: "json"\n  - name: "id.sso.provenance.pio"\n    value: "cee2dc96-08fa-450e-ab5c-a6bf549394f3"\n    type: "uuid"\n  - name: "preferred-currency.coin.provenance.pio"\n    value: "Hash"\n    type: "string"\n  - name: "loan.asset.provenance.pio"\n    value: "pb://metadata/scope-bd3564da-4d84-437b-afe0-0d7593fe191f"\n    type: "uri"\n  - name: "loan.asset.provenance.pio"\n    value: "pb://metadata/scope-bcc05e71-2339-4b67-b0e2-6bc1e39842b6"\n    type: "uri"\n  - name: "loan.asset.provenance.pio"\n    value: "pb://metadata/scope-d6717f59-33d3-4f42-8c1d-a44fdfee1bbf"\n    type: "uri"\n  account_number: 7\n  sequence: 24\n'})}),"\n",(0,a.jsx)(n.p,{children:"In the above example there are a few points to consider."}),"\n",(0,a.jsx)(n.h3,{id:"each-of-the-keys-is-an-owned-name",children:"Each of the keys is an owned name."}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"id.sso.provenance.pio"})," identifier would be owned by an account that delegated control from ",(0,a.jsx)(n.code,{children:"root > Provenance Blockchain > sso > id"})," such that at each level there is an address (requiring the associated private key to sign a transaction creating the record). The address may or may not be the same at each level as a parent may create a sub-key and assign its ownership to another address."]}),"\n",(0,a.jsx)(n.h3,{id:"there-may-be-more-than-one-instance-of-a-key",children:"There may be more than one instance of a key."}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"loan.asset.provenance.pio"})," key appears multiple times in the list. This is allowed so long as the value (more specifically the hash of the value) is unique. This allows flexibility in creating a list of assets (per this example) or any other type of information which may have multiple instances for a single address."]}),"\n",(0,a.jsx)(n.h3,{id:"the-type-information-is-for-serialization",children:"The type information is for serialization"}),"\n",(0,a.jsx)(n.p,{children:"Each of the values is associated with some basic type information. This is required for proper serialization. The intent is to support basic types (int, string) along with platform specific concepts (bech32 addresses, uris, json structures, uuids, etc). Type information can be associated with limits to protect the system. Examples include bounds on integers, length restrictions for strings, and possibly reference checks for blockchain URIs. These limits will be configured using parameters for the handler running in the daemon process."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"NOTE: While something like a protobuf could be included here this presents a challenge as the interpretation of the value then depends on a specification which is not included and thus is not recommended."})}),"\n",(0,a.jsx)(n.h2,{id:"status",children:"Status"}),"\n",(0,a.jsx)(n.p,{children:"Accepted"}),"\n",(0,a.jsx)(n.h2,{id:"consequences",children:"Consequences"}),"\n",(0,a.jsx)(n.p,{children:"The creation of this structure will result in a system with some additional coordination complexity (assigning keys to the name system entries) and a potential for abuse with an excessive number of keys added to an account. The end result is a system that would be easy to discover and use both as an api but also through command line and web tools. The delegation of control is flexible and explicit through the name service ownership hierarchy."}),"\n",(0,a.jsx)(n.h3,{id:"positive",children:"Positive"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Applications can extend the account metadata without modifying or creating a blockchain handler. All extended metadata is displayed in a common standard interface."}),"\n",(0,a.jsx)(n.li,{children:"Applications can be built around well known metadata from an implicitly trusted source associated with an account."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"negative",children:"Negative"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"A generic key/value store concept on an address has a high probability of abuse through excessive numbers of values or proliferation of keys"}),"\n",(0,a.jsx)(n.li,{children:"Account holders are ceding an amount of control to other entities that are making statements about their account without their approval."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"neutral",children:"Neutral"}),"\n",(0,a.jsx)(n.p,{children:"{neutral consequences}"}),"\n",(0,a.jsx)(n.h2,{id:"references",children:"References"})]})}function u(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},98677:(e,n,t)=>{t.d(n,{Y:()=>i});t(67294);var a=t(85893);const i=e=>{let{text:n}=e;return(0,a.jsx)("p",{className:"pb-5 mb-5 -mt-3 border-0 border-b border-b-gray-300 border-solid text-gray-500",children:n})}},11151:(e,n,t)=>{t.d(n,{Z:()=>r,a:()=>o});var a=t(67294);const i={},s=a.createContext(i);function o(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);