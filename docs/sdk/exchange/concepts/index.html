<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-sdk/exchange/concepts" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Exchange Concepts | Provenance Blockchain Developer Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://developer.provenance.io/docs/sdk/exchange/concepts"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Exchange Concepts | Provenance Blockchain Developer Portal"><meta data-rh="true" name="description" content="The x/exchange module facilitates the trading of on-chain assets."><meta data-rh="true" property="og:description" content="The x/exchange module facilitates the trading of on-chain assets."><link data-rh="true" rel="icon" href="/img/prov-logo.svg"><link data-rh="true" rel="canonical" href="https://developer.provenance.io/docs/sdk/exchange/concepts"><link data-rh="true" rel="alternate" href="https://developer.provenance.io/docs/sdk/exchange/concepts" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.provenance.io/docs/sdk/exchange/concepts" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://5NLCC7K64G-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J8X4N657D9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-J8X4N657D9",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Provenance Blockchain Developer Portal" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.29567142.css">
<script src="/assets/js/runtime~main.fd360dd0.js" defer="defer"></script>
<script src="/assets/js/main.3eab12f4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/prov-logo-full-color.png" alt="Provenance Blockchain Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/prov-logo-full-color.png" alt="Provenance Blockchain Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Quick Start</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/quick-start/start-here">Start Here</a></li><li><a class="dropdown__link" href="/docs/quick-start/wallet-and-hash">Get a Wallet &amp; Hash</a></li><li><a class="dropdown__link" href="/docs/pb/blockchain/running-a-node/running-a-node-1/">Run a Node</a></li><li><a class="dropdown__link" href="/docs/quick-start/become-a-validator">Become a Validator</a></li><li><a class="dropdown__link" href="/docs/learn/asset-lifecycle/markers">Tokenize an Asset</a></li><li><a class="dropdown__link" href="/docs/quick-start/build-a-dapp">Build a dApp</a></li><li><a class="dropdown__link" href="/docs/quick-start/write-a-smart-contract">Write a Smart Contract</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Guides</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/learn/asset-lifecycle/assets-overview">Asset Lifecycle Guide</a></li><li><a class="dropdown__link" href="/docs/learn/dapps/dapps-overview">dApp Builder&#x27;s Guide</a></li><li><a class="dropdown__link" href="/docs/learn/learn-about">More Guides &amp; Tutorials</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Build</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/build/dev-environment">Dev Environment</a></li><li><a class="dropdown__link" href="/docs/build/clients">Clients</a></li><li><a class="dropdown__link" href="/docs/build/libraries">Libraries and APIs</a></li><li><a href="https://provenance.io/grants" target="_blank" rel="noopener noreferrer" class="dropdown__link">Grants Program</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Discover</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/discover/explorer">Provenance Explorer</a></li><li><a class="dropdown__link" href="/docs/discover/wallets">Wallets</a></li><li><a class="dropdown__link" href="/docs/discover/hash">Hash</a></li><li><a class="dropdown__link" href="/docs/discover/usdf">USDF</a></li><li><a class="dropdown__link" href="/docs/discover/smart-contract-catalog">Smart Contract Catalog</a></li><li><a class="dropdown__link" href="/docs/discover/dapps">dApps</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Connect</a><ul class="dropdown__menu"><li><a href="https://github.com/provenance-io/" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub</a></li><li><a href="https://discord.gg/kNZC8nwCFP" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord</a></li><li><a href="https://www.linkedin.com/company/provenance-blockchain/" target="_blank" rel="noopener noreferrer" class="dropdown__link">LinkedIn</a></li><li><a href="https://twitter.com/provenancefdn" target="_blank" rel="noopener noreferrer" class="dropdown__link">Twitter</a></li><li><a href="https://medium.com/provenanceblockchain" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/provenance-io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed section-heading"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pb/ecosystem/financial-services-blockchain/">Ecosystem</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed section-heading"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pb/blockchain/introduction/">Blockchain</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed section-heading"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/pb/modules/">Modules</a><button aria-label="Expand sidebar category &#x27;Modules&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed section-heading"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pb/modules/ibc-and-zones">IBC and Zones</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed section-heading"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pb/p8e/overview/">BlockVault</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed section-heading"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pb/contributing/adr/">Contributing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed section-heading"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/pb/faq/validator-faq">FAQ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item section-heading"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/sdk/">SDK</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/">List of Modules</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sdk/attribute/">x/attribute</a><button aria-label="Expand sidebar category &#x27;x/attribute&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/sdk/exchange/">x/exchange</a><button aria-label="Collapse sidebar category &#x27;x/exchange&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/sdk/exchange/concepts">Exchange Concepts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/exchange/state">Exchange State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/exchange/messages">Exchange Messages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/exchange/events">Exchange Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/exchange/queries">Exchange Queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/exchange/params">Exchange Params</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sdk/hold/">x/hold</a><button aria-label="Expand sidebar category &#x27;x/hold&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/ibchooks/">x/ibchooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/sdk/ibcratelimit/">x/ibcratelimit</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sdk/marker/">x/marker</a><button aria-label="Expand sidebar category &#x27;x/marker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sdk/metadata/">x/metadata</a><button aria-label="Expand sidebar category &#x27;x/metadata&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sdk/msgfees/">x/msgfees</a><button aria-label="Expand sidebar category &#x27;x/msgfees&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sdk/name/">x/name</a><button aria-label="Expand sidebar category &#x27;x/name&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sdk/oracle/">x/oracle</a><button aria-label="Expand sidebar category &#x27;x/oracle&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sdk/reward/">x/rewards</a><button aria-label="Expand sidebar category &#x27;x/rewards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/sdk/trigger/">x/trigger</a><button aria-label="Expand sidebar category &#x27;x/trigger&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item section-heading"><div class="menu__list-item-collapsible"><a class="menu__link">License</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">Apache 2.0<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">SDK</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/sdk/exchange/"><span itemprop="name">x/exchange</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Exchange Concepts</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Exchange Concepts</h1>
<p>The <code>x/exchange</code> module facilitates the trading of on-chain assets.</p>
<p>Markets provide fee structures and are responsible for identifying and triggering settlements.
Orders are created by users to indicate a desire to trade on-chain funds in a market.
The exchange module defines a portion of market fees to be paid to the chain (distributed like gas fees).</p>
<hr>
<ul>
<li><a href="#markets">Markets</a>
<ul>
<li><a href="#required-attributes">Required Attributes</a></li>
<li><a href="#market-permissions">Market Permissions</a></li>
<li><a href="#settlement">Settlement</a></li>
</ul>
</li>
<li><a href="#orders">Orders</a>
<ul>
<li><a href="#ask-orders">Ask Orders</a></li>
<li><a href="#bid-orders">Bid Orders</a></li>
<li><a href="#partial-orders">Partial Orders</a></li>
<li><a href="#external-ids">External IDs</a></li>
</ul>
</li>
<li><a href="#fees">Fees</a>
<ul>
<li><a href="#order-creation-fees">Order Creation Fees</a></li>
<li><a href="#settlement-flat-fees">Settlement Flat Fees</a></li>
<li><a href="#settlement-ratio-fees">Settlement Ratio Fees</a></li>
<li><a href="#exchange-fees">Exchange Fees</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="markets">Markets<a href="#markets" class="hash-link" aria-label="Direct link to Markets" title="Direct link to Markets">​</a></h2>
<p>A market is a combination of on-chain setup and off-chain processes.
They are created by a governance proposal using the <a href="/docs/sdk/exchange/messages#msggovcreatemarketrequest">MsgGovCreateMarketRequest</a> message.
Most aspects of the market are then manageable using permissioned endpoints.
Fees can only be managed with a governance proposal using the <a href="/docs/sdk/exchange/messages#msggovmanagefeesrequest">MsgGovManageFeesRequest</a> message.</p>
<p>Each market has a set of optional details designed for human-use, e.g. name, description, website url.</p>
<p>A market is responsible (off-chain) for identifying order matches and triggering (on-chain) settlement.</p>
<p>A market receives fees for order creation and order settlement. It also defines what fees are required and what is acceptable as payments.</p>
<p>A market can delegate various <a href="#market-permissions">permissions</a> to other accounts, allowing those accounts to use specific endpoints on behalf of the market.</p>
<p>Markets can restrict who can create orders with them by defining account attributes that are required to create orders. See <a href="#required-attributes">Required Attributes</a>.</p>
<p>Markets can control whether user-settlement is allowed.
When user-settlement is allowed, the <a href="/docs/sdk/exchange/messages#fillbids">FillBids</a> and <a href="/docs/sdk/exchange/messages#fillasks">FillAsks</a> endpoints can be used for orders in the market.</p>
<p>A market can also control whether orders can be created for it.
When order creation is not allowed, any existing orders can still be settled or cancelled, but no new ones can be made (in that market).</p>
<p>The fees collected by a market are kept in the market&#x27;s account, and can be accessed using the <a href="/docs/sdk/exchange/messages#marketwithdraw">MarketWithdraw</a> endpoint.</p>
<p>See also: <a href="/docs/sdk/exchange/messages#market">Market</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="required-attributes">Required Attributes<a href="#required-attributes" class="hash-link" aria-label="Direct link to Required Attributes" title="Direct link to Required Attributes">​</a></h3>
<p>There is a separate list of attributes required to create each order type.
If one or more attributes are required to create an order of a certain type, the order creator (buyer or seller) must have all of them on their account.</p>
<p>Required attributes can have a wildcard at the start to indicate that any attribute with the designated base and one (or more) level(s) is applicable.
The only place a wildcard <code>*</code> is allowed is at the start of the string and must be immediately followed by a period.
For example, a required attribute of <code>*.kyc.pb</code> would match an account attribute of <code>buyer.kyc.pb</code> or <code>special.seller.kyc.pb</code>, but not <code>buyer.xkyc.pb</code> (wrong base) or <code>kyc.pb</code> (no extra level).</p>
<p>Attributes are defined using the <a href="/x/name/spec/README.md">x/name</a> module, and are managed on accounts using the <a href="/x/attribute/spec/README.md">x/attributes</a> module.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="market-permissions">Market Permissions<a href="#market-permissions" class="hash-link" aria-label="Direct link to Market Permissions" title="Direct link to Market Permissions">​</a></h3>
<p>The different available permissions are defined by the <a href="/docs/sdk/exchange/messages#permission">Permission</a> proto enum message.</p>
<p>Each market manages its own set of <a href="/docs/sdk/exchange/messages#accessgrant">AccessGrants</a>, which confer specific permissions to specific addresses.</p>
<ul>
<li><code>PERMISSION_UNSPECIFIED</code>: it is an error to try to use this permission for anything.</li>
<li><code>PERMISSION_SETTLE</code>: accounts with this permission can use the <a href="/docs/sdk/exchange/messages#marketsettle">MarketSettle</a> endpoint for a market.</li>
<li><code>PERMISSION_SET_IDS</code>: accounts with this permission can use the <a href="/docs/sdk/exchange/messages#marketsetorderexternalid">MarketSetOrderExternalID</a> endpoint for a market.</li>
<li><code>PERMISSION_CANCEL</code>: accounts with this permission can use the <a href="/docs/sdk/exchange/messages#cancelorder">CancelOrder</a> endpoint to cancel orders in a market.</li>
<li><code>PERMISSION_WITHDRAW</code>: accounts with this permission can use the <a href="/docs/sdk/exchange/messages#marketwithdraw">MarketWithdraw</a> endpoint for a market.</li>
<li><code>PERMISSION_UPDATE</code>: accounts with this permission can use the <a href="/docs/sdk/exchange/messages#marketupdatedetails">MarketUpdateDetails</a>, <a href="/docs/sdk/exchange/messages#marketupdateenabled">MarketUpdateEnabled</a>, and <a href="/docs/sdk/exchange/messages#marketupdateusersettle">MarketUpdateUserSettle</a> endpoints for a market.</li>
<li><code>PERMISSION_PERMISSIONS</code>: accounts with this permission can use the <a href="/docs/sdk/exchange/messages#marketmanagepermissions">MarketManagePermissions</a> endpoint for a market.</li>
<li><code>PERMISSION_ATTRIBUTES</code>: accounts with this permission can use the <a href="/docs/sdk/exchange/messages#marketmanagereqattrs">MarketManageReqAttrs</a> endpoint for a market.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="settlement">Settlement<a href="#settlement" class="hash-link" aria-label="Direct link to Settlement" title="Direct link to Settlement">​</a></h3>
<p>Each market is responsible for the settlement of its orders.
To do this, it must first identify a matching set of asks and bids.
The <a href="/docs/sdk/exchange/messages#marketsettle">MarketSettle</a> endpoint is then used to settle and clear orders.
If the market allows, users can also settlement orders with their own funds using the <a href="/docs/sdk/exchange/messages#fillbids">FillBids</a> or <a href="/docs/sdk/exchange/messages#fillasks">FillAsks</a> endpoints.</p>
<p>During settlement, at most one order can be partially filled, and it must be the last order in its list (in <a href="/docs/sdk/exchange/messages#msgmarketsettlerequest">MsgMarketSettleRequest</a>).
That order must allow partial settlement (defined at order creation) and be evenly divisible (see <a href="#partial-orders">Partial Orders</a>).
The market must also set the <code>expect_partial</code> field to <code>true</code> in the request.
If all of the orders are being filled in full, the <code>expect_partial</code> field must be <code>false</code>.</p>
<p>All orders in a settlement must have the same <code>assets</code> denoms, and also the same <code>price</code> denoms, but the fees can be anything.
The total bid price must be at least the total ask price (accounting for partial fulfillment if applicable).</p>
<p>During settlement:</p>
<ol>
<li>The <code>assets</code> are transferred directly from the seller(s) to the buyer(s).</li>
<li>The <code>price</code> funds are transferred directly from the buyer(s) to the seller(s).</li>
<li>All settlement fees are transferred directly from the seller(s) and buyer(s) to the market.</li>
<li>The exchange&#x27;s portion of the fees is transferred from the market to the chain&#x27;s fee collector.</li>
</ol>
<p>With complex settlements, it&#x27;s possible that an ask order&#x27;s <code>assets</code> go to a different account than the <code>price</code> funds come from, and vice versa for bid orders.</p>
<p>Transfers of the <code>assets</code> and <code>price</code> bypass the quarantine module since order creation can be viewed as acceptance of those funds.</p>
<p>Transfers do not bypass any other send-restrictions (e.g. <code>x/marker</code> or <code>x/sanction</code> module restrictions).
E.g. If an order&#x27;s funds are in a sanctioned account, settlement of that order will fail since those funds cannot be removed from that account.
Or, if a marker has required attributes, but the recipient does not have those attributes, settlement will fail.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="orders">Orders<a href="#orders" class="hash-link" aria-label="Direct link to Orders" title="Direct link to Orders">​</a></h2>
<p>Orders are created by users that want to trade assets in a market.</p>
<p>When an order is created, a hold is placed on the applicable funds.
Those funds will remain in the user&#x27;s account until the order is settled or cancelled.
The holds ensure that the required funds are available at settlement without the need of an intermediary holding/clearing account.
During settlement, the funds get transferred directly between the buyers and sellers, and fees are paid from the buyers and sellers directly to the market.</p>
<p>Orders can be cancelled by either the user or the market.</p>
<p>Once an order is created, it cannot be modified except in these specific ways:</p>
<ol>
<li>When an order is partially filled, the amounts in it will be reduced accordingly.</li>
<li>An order&#x27;s external id can be changed by the market.</li>
<li>Cancelling an order will release the held funds and delete the order.</li>
<li>Settling an order in full will delete the order.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ask-orders">Ask Orders<a href="#ask-orders" class="hash-link" aria-label="Direct link to Ask Orders" title="Direct link to Ask Orders">​</a></h3>
<p>Ask orders represent a desire to sell some specific <code>assets</code> at a minimum <code>price</code>.
When an ask order is created, a hold is placed on the <code>assets</code> being sold.
If the denom of the <code>seller_settlement_flat_fee</code> is different from the denom of the price, a hold is placed on that flat fee too.
It&#x27;s possible for an ask order to be filled at a larger <code>price</code> than initially defined.</p>
<p>The <code>seller_settlement_flat_fee</code> is verified at the time of order creation, but only paid during settlement.</p>
<p>When an ask order is settled, the <code>assets</code> are transferred directly to the buyer(s) and the <code>price</code> is transferred directly from the buyer(s).
Then the seller settlement fees are transferred from the seller to the market.</p>
<p>During settlement, the seller settlement fee ratio with the appropriate <code>price</code> denom is applied to the price the seller is receiving.
That result is then added to the ask order&#x27;s <code>seller_settlement_flat_fee</code> to get the total settlement fee to be paid for the ask order.
In this way, the seller&#x27;s settlement ratio fee can be taken out of the <code>price</code> funds that the seller is receiving.
If the <code>seller_settlement_flat_fee</code> is the same denom as the price, it can come out of the <code>price</code> funds too.</p>
<p>Because the fees can come out of the <code>price</code> funds, it&#x27;s possible (probable) that the total <code>price</code> funds that the seller ends up with, is less than their requested price.</p>
<p>For example, a user creates an ask order to sell <code>2cow</code> (the <code>assets</code>) and wants at least <code>15chicken</code> (the <code>price</code>).
The market finds a way to settle that order where the seller will get <code>16chicken</code>, but the seller&#x27;s settlement fee will end up being <code>2chicken</code>.
During settlement, the <code>2cow</code> are transferred from the seller to the buyer, and <code>16chicken</code> are transferred from the buyer to the seller.
Then, <code>2chicken</code> are transferred from the seller to the market.
So the seller ends up with <code>14chicken</code> for their <code>2cow</code>.</p>
<p>See also: <a href="/docs/sdk/exchange/messages#askorder">AskOrder</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bid-orders">Bid Orders<a href="#bid-orders" class="hash-link" aria-label="Direct link to Bid Orders" title="Direct link to Bid Orders">​</a></h3>
<p>Bid orders represent a desire to buy some specific <code>assets</code> at a specific <code>price</code>.
When a bid order is created, a hold is placed on the order&#x27;s <code>price</code> and <code>buyer_settlement_fees</code>.</p>
<p>When a bid order is settled, the <code>price</code> is transferred directly to the seller(s) and the assets are transferred directly from the seller(s).
Then, the buyer settlement fees are transferred from the buyer to the market.</p>
<p>The <code>buyer_settlement_fees</code> are verified at the time of order creation, but only paid during settlement.
They are paid in addition to the <code>price</code> the buyer is paying.</p>
<p>See also: <a href="/docs/sdk/exchange/messages#bidorder">BidOrder</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="partial-orders">Partial Orders<a href="#partial-orders" class="hash-link" aria-label="Direct link to Partial Orders" title="Direct link to Partial Orders">​</a></h3>
<p>Both Ask orders and Bid orders can optionally allow partial fulfillment by setting the <code>allow_partial</code> field to <code>true</code> when creating the order.</p>
<p>When an order is partially filled, the order&#x27;s same <code>assets:price</code> and <code>assets:settlement-fees</code> ratios are maintained.</p>
<p>Since only whole numbers are allowed, this means that:</p>
<ul>
<li><code>&lt;order price&gt; * &lt;assets filled&gt; / &lt;order assets&gt;</code> must be a whole number.</li>
<li><code>&lt;settlement fees&gt; * &lt;assets filled&gt; / &lt;order assets&gt;</code> must also be a whole number.</li>
</ul>
<p>When an ask order is partially filled, it&#x27;s <code>price</code> and <code>seller_settlement_flat_fee</code> are reduced at the same rate as the assets, even if the seller is receiving a higher price than requested.
E.g. If an ask order selling <code>2cow</code> for <code>10chicken</code> is partially settled for <code>1cow</code> at a price of <code>6chicken</code>, the seller will receive the <code>6chicken</code> but the updated ask order will list that there&#x27;s still <code>1cow</code> for sale for <code>5chicken</code>.</p>
<p>When an order is partially filled, its amounts are updated to reflect what hasn&#x27;t yet been filled.</p>
<p>An order that allows partial fulfillment can be partially filled multiple times (as long as the numbers allow for it).</p>
<p>Settlement will fail if an order is being partially filled that either doesn&#x27;t allow it, or cannot be evenly split at the needed <code>assets</code> amount.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="external-ids">External IDs<a href="#external-ids" class="hash-link" aria-label="Direct link to External IDs" title="Direct link to External IDs">​</a></h3>
<p>Orders can be identified using an off-chain identifier.
These can be provided during order creation (in the <code>external_id</code> field).
They can also be set by the market after the order has been created using the <a href="/docs/sdk/exchange/messages#marketsetorderexternalid">MarketSetOrderExternalID</a> endpoint.</p>
<p>Each external id is unique inside a market.
I.e. two orders in the same market cannot have the same external id, but two orders in different markets <strong>can</strong> have the same external id.
An attempt (by a user) to create an order with a duplicate external id, will fail.
An attempt (by a market) to change an order&#x27;s external id to one already in use, will fail.</p>
<p>The external ids are optional, so it&#x27;s possible that multiple orders in a market have an empty string for the external id.
Orders with external ids can be looked up using the <a href="/docs/sdk/exchange/queries#getorderbyexternalid">GetOrderByExternalID</a> query (as well as the other order queries).</p>
<p>External ids are limited to 100 characters.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fees">Fees<a href="#fees" class="hash-link" aria-label="Direct link to Fees" title="Direct link to Fees">​</a></h2>
<p>Markets dictate the minimum required fees. It&#x27;s possible to pay more than the required fees, but not less.</p>
<p>A portion of the fees that a market collects are sent to the blockchain and distributed similar to gas fees.
This portion is dictated by the exchange module in its <a href="/docs/sdk/exchange/params">params</a>.</p>
<p>There are three types of fees:</p>
<ul>
<li>Order creation: Flat fees paid at the time that an order is created.</li>
<li>Settlement flat fees: A fee paid during settlement that is the same for each order.</li>
<li>Settlement ratio fees: A fee paid during settlement that is based off of the order&#x27;s price.</li>
</ul>
<p>For each fee type, there is a configuration for each order type.
E.g. the ask-order creation fee is configured separately from the bid-order creation fee.</p>
<p>Each fee type is only paid in a single denom, but a market can define multiple options for each.
E.g. if flat fee options for a specific fee are <code>5chicken,1cow</code>, users can provide <strong>either</strong> <code>5chicken</code> or <code>1cow</code> to fulfill that required fee.</p>
<p>If a market does not have any options defined for a given fee type, that fee is not required.
E.g. if the <code>fee_create_ask_flat</code> field is empty, there is no fee required to create an ask order.</p>
<p>All fees except the seller settlement ratio fees must be provided with order creation, and are validated at order creation.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="order-creation-fees">Order Creation Fees<a href="#order-creation-fees" class="hash-link" aria-label="Direct link to Order Creation Fees" title="Direct link to Order Creation Fees">​</a></h3>
<p>This is a fee provided in the <code>order_creation_fee</code> field of the order creation <code>Msg</code>s and is collected immediately.
These are paid on top of any gas or message fees required.</p>
<p>Each order type has its own creation fee configuration:</p>
<ul>
<li><code>fee_create_ask_flat</code>: The available <code>Coin</code> fee options for creating an ask order.</li>
<li><code>fee_create_bid_flat</code>: The available <code>Coin</code> fee options for creating a bid order.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="settlement-flat-fees">Settlement Flat Fees<a href="#settlement-flat-fees" class="hash-link" aria-label="Direct link to Settlement Flat Fees" title="Direct link to Settlement Flat Fees">​</a></h3>
<p>This is a fee provided as part of an order, but is not collected until settlement.</p>
<p>Each order type has its own settlement flat fee configuration:</p>
<ul>
<li><code>fee_seller_settlement_flat</code>: The available <code>Coin</code> fee options that are paid by the seller during settlement.</li>
<li><code>fee_buyer_settlement_flat</code>: The available <code>Coin</code> fee options that are paid by the buyer during settlement.</li>
</ul>
<p>The ask order&#x27;s <code>seller_settlement_flat_fee</code> must be at least one of the available <code>fee_seller_settlement_flat</code> options.
The bid order&#x27;s <code>buyer_settlement_fees</code> must be enough to cover one of the <code>fee_buyer_settlement_flat</code> options plus one of the buyer settlement ratio fee options.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="settlement-ratio-fees">Settlement Ratio Fees<a href="#settlement-ratio-fees" class="hash-link" aria-label="Direct link to Settlement Ratio Fees" title="Direct link to Settlement Ratio Fees">​</a></h3>
<p>A <a href="/docs/sdk/exchange/messages#feeratio">FeeRatio</a> is a pair of <code>Coin</code>s defining a <code>price</code> to <code>fee</code> ratio.</p>
<p>Each order type has its own settlement ratio fee configurations:</p>
<ul>
<li><code>fee_seller_settlement_ratios</code>: The available <code>FeeRatio</code> options that are applied to the <code>price</code> received.</li>
<li><code>fee_buyer_settlement_ratios</code>: The available <code>FeeRatio</code> options that are applied to the bid order&#x27;s <code>price</code>.</li>
</ul>
<p>If a market defines both buyer and seller settlement ratios, they should define ratios in each with the same set of <code>price</code> denoms.
E.g. if there&#x27;s a <code>fee_buyer_settlement_ratios</code> entry of <code>100chicken:1cow</code>, there should be an entry in <code>fee_seller_settlement_ratios</code> with a price denom of <code>chicken</code> (or <code>fee_seller_settlement_ratios</code> should be empty).</p>
<p>If a market requires both, but there&#x27;s a price denom in the <code>fee_buyer_settlement_ratios</code> that isn&#x27;t in <code>fee_seller_settlement_ratios</code>, then orders with that denom in their <code>price</code> cannot be settled.
If a market requires both, but there&#x27;s a price denom in the <code>fee_seller_settlement_ratios</code> that isn&#x27;t in <code>fee_buyer_settlement_ratios</code>, then bid orders with that denom in their <code>price</code> cannot be created, so ask orders with that price denom will have nothing to settle with.</p>
<p>A <code>FeeRatio</code> can have a zero <code>fee</code> amount (but not a zero <code>price</code> amount), e.g. <code>1chicken:0chicken</code> is okay, but <code>0chicken:1chicken</code> is bad.
This allows a market to not charge a ratio fee for a specific <code>price</code> denom.</p>
<p>A <code>FeeRatio</code> with the same <code>price</code> and <code>fee</code> denoms must have a larger price amount than fee amount.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="seller-settlement-ratio-fee">Seller Settlement Ratio Fee<a href="#seller-settlement-ratio-fee" class="hash-link" aria-label="Direct link to Seller Settlement Ratio Fee" title="Direct link to Seller Settlement Ratio Fee">​</a></h4>
<p>A market&#x27;s <code>fee_seller_settlement_ratios</code> are limited to <code>FeeRatio</code>s that have the same <code>price</code> and <code>fee</code> denom.
This ensures that the seller settlement fee can always be paid by the funds the seller is receiving.</p>
<p>To calculate the seller settlement ratio fee, the following formula is used: <code>&lt;settlement price&gt; * &lt;ratio fee&gt; / &lt;ratio price&gt;</code>.
If that is not a whole number, it is rounded up to the next whole number.</p>
<p>E.g. A market has <code>1000chicken:3chicken</code> in <code>fee_seller_settlement_ratios</code>.</p>
<ul>
<li>An order is settling for <code>400chicken</code>: <code>400 * 3 / 1000</code> = <code>1.2</code>, which is rounded up to <code>2chicken</code>.</li>
<li>An order is settling for <code>3000chicken</code>: <code>3000 * 3 / 1000</code> = <code>9</code>, which doesn&#x27;t need rounding, so stays at <code>9chicken</code>.</li>
</ul>
<p>The actual amount isn&#x27;t known until settlement, but a minimum can be calculated by applying the applicable ratio to an ask order&#x27;s <code>price</code>.
The seller settlement ratio fee will be at least that amount, but since it gets larger slower than the price, <code>&lt;ask order price&gt; - &lt;ratio fee based on ask order price&gt; - &lt;flat fee&gt;</code> is the least amount the seller will end up with.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="buyer-settlement-ratio-fee">Buyer Settlement Ratio Fee<a href="#buyer-settlement-ratio-fee" class="hash-link" aria-label="Direct link to Buyer Settlement Ratio Fee" title="Direct link to Buyer Settlement Ratio Fee">​</a></h4>
<p>A market&#x27;s <code>fee_buyer_settlement_ratios</code> can have <code>FeeRatios</code> with any denom pair, i.e. the <code>price</code> and <code>fee</code> do not need to be the same denom.
It can also have multiple entries with the same <code>price</code> denom or <code>fee</code> denom, but it can only have one entry for each <code>price</code> to <code>fee</code> denom pair.
E.g. a market can have <code>100chicken:1cow</code> and also <code>100chicken:7chicken</code>, <code>500cow:1cow</code>, and <code>5cow:1chicken</code>, but it couldn&#x27;t also have <code>105chicken:2cow</code>.</p>
<p>To calculate the buyer settlement ratio fee, the following formula is used: <code>&lt;bid price&gt; * &lt;ratio fee&gt; / &lt;ratio price&gt;</code>.
If that is not a whole number, the chosen ratio is not applicable to the bid order&#x27;s price and cannot be used.
The user will need to either use a different ratio or change their bid price.</p>
<p>The buyer settlement ratio fee should be added to the buyer settlement flat fee and provided in the <code>buyer_settlement_fees</code> in the bid order.
The ratio and flat fees can be in any denoms allowed by the market, and do not have to be the same.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="exchange-fees">Exchange Fees<a href="#exchange-fees" class="hash-link" aria-label="Direct link to Exchange Fees" title="Direct link to Exchange Fees">​</a></h3>
<p>A portion of the fees collected by a market, are given to the exchange.
The amount is defined using basis points in the exchange module&#x27;s <a href="/docs/sdk/exchange/params#params">Params</a> and can be configured differently for specific denoms.</p>
<p>When the market collects fees, the applicable basis points are looked up and applied to the amount being collected.
That amount is then transferred from the market&#x27;s account to the chain&#x27;s fee collector (similar to gas fees).</p>
<p>The following formula is used for each denom in the fees being collected: <code>&lt;fee amount&gt; * &lt;basis points&gt; / 10,000</code>.
If that is not a whole number, it is rounded up to the next whole number.</p>
<p>For example, Say the exchange has a default split of <code>500</code> (basis points), and a specific split of <code>100</code> for <code>rooster</code>.
When a market collects a fee of <code>1500hen,710rooster</code>:
There is no specific split for <code>hen</code>, so the default <code>500</code> is used for them. <code>1500 * 500 / 10,000</code> = <code>75hen</code> (a whole number, so no rounding is needed).
The specific <code>rooster</code> split of <code>100</code> is used for those: <code>710 * 100 / 10,000</code> = <code>7.1</code> which gets rounded up to <code>8rooster</code>.
So the market will first receive <code>1500hen,710rooster</code> from the buyer(s)/seller(s), then <code>75hen,8rooster</code> is transferred from the market to the fee collector.
The market is then left with <code>1425hen:702rooster</code>.</p>
<p>During <a href="/docs/sdk/exchange/messages#marketsettle">MarketSettle</a>, the math and rounding is applied to the total fee being collected (as opposed to applying it to each order&#x27;s fee first, then summing that).</p>
<p>During order creation, the exchange&#x27;s portion of the order creation fee is calculated and collected from the creation fee provided in the <code>Msg</code>.</p>
<p>During <a href="/docs/sdk/exchange/messages#fillbids">FillBids</a> or <a href="/docs/sdk/exchange/messages#fillasks">FillAsks</a>, the settlement fees are summed and collected separately from the order creation fee.
That means the math and rounding is done twice, once for the total settlement fees and again for the order creation fee.
This is done so that the fees are collected the same as if an order were created and later settled by the market.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/sdk/exchange/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">x/exchange</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/sdk/exchange/state"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Exchange State</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#markets" class="table-of-contents__link toc-highlight">Markets</a><ul><li><a href="#required-attributes" class="table-of-contents__link toc-highlight">Required Attributes</a></li><li><a href="#market-permissions" class="table-of-contents__link toc-highlight">Market Permissions</a></li><li><a href="#settlement" class="table-of-contents__link toc-highlight">Settlement</a></li></ul></li><li><a href="#orders" class="table-of-contents__link toc-highlight">Orders</a><ul><li><a href="#ask-orders" class="table-of-contents__link toc-highlight">Ask Orders</a></li><li><a href="#bid-orders" class="table-of-contents__link toc-highlight">Bid Orders</a></li><li><a href="#partial-orders" class="table-of-contents__link toc-highlight">Partial Orders</a></li><li><a href="#external-ids" class="table-of-contents__link toc-highlight">External IDs</a></li></ul></li><li><a href="#fees" class="table-of-contents__link toc-highlight">Fees</a><ul><li><a href="#order-creation-fees" class="table-of-contents__link toc-highlight">Order Creation Fees</a></li><li><a href="#settlement-flat-fees" class="table-of-contents__link toc-highlight">Settlement Flat Fees</a></li><li><a href="#settlement-ratio-fees" class="table-of-contents__link toc-highlight">Settlement Ratio Fees</a></li><li><a href="#exchange-fees" class="table-of-contents__link toc-highlight">Exchange Fees</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:inbound@provenance.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">inbound@provenance.io<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/kNZC8nwCFP" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/provenancefdn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://medium.com/provenanceblockchain" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/provenance-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Provenance Blockchain Foundation</div></div></div></footer></div>
</body>
</html>